# 객체지향프로그래밍 4주차 복습하기1
## 클래스

---
### 메모리 구조

메모리는 스택 영역, 힙 영역, 데이터 영역, 코드 영역으로 나뉜다.

| 영역 | 설명 |
|------|------|
| 스택 영역 | 지역 변수와 매개 변수 |
| 힙 영역 | 사용자의 동적 할당 |
| 데이터 영역 | 전역 변수와 정적 변수 |
| 코드 영역 | 실행할 프로그램의 코드 |

**스택 영역**의 경우에는 선입후출의 순서를 따른다.

'''cpp
int main(){
  int a;
  double b;
  }
'''

예를 들어 위의 코드 같은 경우에는 a -> b 순서로 변수가 생성되고 할당된다.
하지만 프로그램이 끝나고 변수가 제거 될 때는 b -> a 순서로 제거된다.

**힙 영역**은 사용자가 직접 관리할 수 있고 관리 해야하는 메모리 영역이다.

때문에 new연산자와 delete연산자를 이용하여 데이터를 저장한다.

**new 연산자** 
힙 영역에 동적으로 메모리를 할당한다.
할당된 데이터 타입에 대한 포인터를 리턴한다.

사용예
'''cpp
int main(){
  int* p1 = new int;
  int* p2 = new int{ 5 };
  int* p3 = new int[5];
  }
'''

| 형태 | 내용 |
|------|-------|
| new int; | int형의 변수를 힙 영역에 할당 |
| new int{ 5 }; | int형의 변수를 힙 영역에 할당 후 5로 초기화 |
| new int[5]; | int형 배열을 5의 길이로 할당 |


**delete 연산자**
동적으로 할당된 메모리를 해제
포인터 변수 삭제x

사용예
'''cpp
int main(){
  int* p1 = new int{ 5 };
  int* p2 = new int[5];

  delete p1;
  delete[] p2;
}
'''

delete를 하지 않으면 메모리 누수가 일어나 사용하지도 않는 데이터에 대한 공간을 점유하게 됨.

**허상 포인터**
delete 이후 해당 포인터는 유효하지 않는 메모리를 참조하기 때문에 허상포인터가 된다.
때문에 널 포인터로 설정해주어야 한다.

이를 쉽게 해주는 스마트 포인터가 존재한다.

---
## 얕은 복사, 깊은 복사

### 얕은 복사
포인터 대입 연산으로 메모리 주소만 복사한다.

### 깊은 복사
데이터를 복사하여 새로운 메모리를 할당하여 복사한다.

기본적으로 깊은 복사가 사용했을 때 문제가 덜 생기고 개발자의 의도대로 사용된다.
하지만 얕은 복사가 상황에 따라 깊은 복사보다 훨씬 적은 비용이 들기에
상황에 따라 적절히 쓰는 것이 중요!

